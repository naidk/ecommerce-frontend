import{u as c,j as e,a as m,L as d,z as r,b as u}from"./index-CzVdNPn5.js";import{u as x,a as b}from"./index.esm-G7npbGOv.js";import{t as g,l as p}from"./auth-Br9gPguQ.js";const w=()=>{const n=c(),{register:a,handleSubmit:l,formState:{errors:t}}=x({resolver:g(p)}),o=b({mutationFn:async s=>(await u.post("/auth/login",s)).data,onSuccess:s=>{localStorage.setItem("token",s.token),localStorage.setItem("customerId",s.id),n("/"),r.success("Welcome back!")},onError:s=>{console.error("Login failed",s),r.error("Login failed. Please check your credentials.")}}),i=s=>{o.mutate(s)};return e.jsxs("div",{className:"max-w-md mx-auto mt-10 bg-white p-8 rounded-lg shadow-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login to your account"}),e.jsxs("form",{onSubmit:l(i),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{...a("email"),type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),t.email&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsx("input",{...a("password"),type:"password",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),t.password&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:t.password.message})]}),e.jsx("button",{type:"submit",disabled:o.isPending,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o.isPending?e.jsx(m,{className:"animate-spin h-5 w-5"}):"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account? ",e.jsx(d,{to:"/register",className:"text-blue-600 hover:underline",children:"Register here"})]})})]})};export{w as default};
