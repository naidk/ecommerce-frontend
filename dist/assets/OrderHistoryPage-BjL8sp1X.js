import{c as r,u as y,j as e,a as u,b as d,z as i}from"./index-CzVdNPn5.js";import{u as p}from"./useQuery-DpSZHIfj.js";/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=r("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j=r("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=r("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.427.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=r("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),w=()=>{const o=y(),a=localStorage.getItem("customerId"),{data:n,isLoading:x,error:m}=p({queryKey:["orders",a],queryFn:async()=>a?(await d.get(`/order/customer/${a}`)).data:null,enabled:!!a}),h=async s=>{try{await d.post(`/payment/${s}`),i.success("Payment simulated successfully!")}catch(t){console.error("Payment simulation failed",t),i.error("Payment failed.")}};if(!a)return e.jsx("div",{className:"p-8 text-center",children:"Please login to view orders."});if(x)return e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(u,{className:"w-8 h-8 animate-spin text-blue-600"})});if(m)return e.jsx("div",{className:"p-8 text-center text-red-500",children:"Failed to load orders."});const c=(n==null?void 0:n.content)||[];return c.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-dashed border-gray-300",children:[e.jsx(b,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No orders yet"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Looks like you haven't placed any orders."}),e.jsx("button",{onClick:()=>o("/products"),className:"text-blue-600 hover:underline font-medium",children:"Start Shopping"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"}),e.jsx("div",{className:"space-y-4",children:c.map(s=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-50 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(g,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Order ID: ",s.id]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide
                                    ${s.status==="COMPLETED"?"bg-green-100 text-green-700":s.status==="PENDING"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:s.status}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",s.totalPrice.toFixed(2)]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"space-y-3 mb-6",children:s.orderItems.map(t=>{var l;return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-md flex items-center justify-center text-xs text-gray-400",children:"Img"}),e.jsxs("span",{className:"font-medium text-gray-700",children:[((l=t.product)==null?void 0:l.name)||"Product"," ",e.jsxs("span",{className:"text-gray-400",children:["x",t.quantity]})]})]}),e.jsxs("span",{className:"text-gray-600",children:["$",t.priceAtPurchase.toFixed(2)]})]},t.id)})}),e.jsxs("div",{className:"flex justify-end pt-4 border-t border-gray-50 gap-3",children:[s.status==="PENDING"&&e.jsxs("button",{onClick:()=>h(s.id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-lg hover:bg-green-700 transition",children:[e.jsx(N,{className:"w-4 h-4"}),"Pay Now"]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 text-blue-600 text-sm font-medium hover:bg-blue-50 rounded-lg transition",children:["View Details ",e.jsx(j,{className:"w-4 h-4"})]})]})]})]},s.id))})]})};export{w as default};
